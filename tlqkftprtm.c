#include <stdio.h>
#pragma warnings(disable:4996)
#include <windows.h>
#include <wincon.h>
#include <conio.h>
#include<time.h>
#define UP 77
#define DOWN 75
#define RIGHT 80
#define LEFT 72

int cnt = 0;
int map[27][30] = {	//미로 맵(2차원 배열)
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},	//가로 : 28
		{1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1},
		{1,3,0,0,0,0,1,0,1,1,0,1,0,0,0,1,1,1,1,1,1,1,0,1,1,0,1,1,0,1},
		{1,1,1,1,1,0,1,0,1,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1},
		{1,0,0,0,0,0,1,0,1,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1},
		{1,0,1,1,1,0,1,0,1,1,0,1,0,1,1,0,1,1,1,1,1,1,0,0,0,1,0,0,0,1},
		{1,1,1,1,1,0,1,0,1,1,0,1,0,1,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1},
		{1,0,0,0,0,0,1,0,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1},
		{1,0,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,1},
		{1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,0,1,1,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,1,0,1,1,1},
		{1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,1},
		{1,1,0,1,1,1,0,1,1,0,1,1,1,1,0,1,1,0,1,0,1,0,0,0,1,0,0,0,0,1},
		{1,1,0,1,1,1,0,1,1,0,0,0,0,1,0,1,1,0,1,0,1,0,1,1,1,1,1,1,0,1},
		{1,0,0,1,1,1,0,0,1,1,1,1,0,1,0,1,1,0,0,0,1,0,1,1,0,0,0,1,0,1},
		{1,0,1,1,1,1,1,0,1,0,0,0,0,1,0,1,1,1,1,1,1,0,1,1,0,1,0,1,0,1},
		{1,0,1,1,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,0,1,1,0,1,0,1,0,1},
		{1,0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1},
		{1,1,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1},
		{1,1,1,1,1,0,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1},
		{1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,0,1,0,1},
		{1,0,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,1,0,1},
		{1,0,0,0,1,0,0,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,0,1},
		{1,1,1,0,1,0,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,1,1,1},
		{1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,2},	//25,29
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},	//26, ?
};
void player(int x, int y);
void map_create();
void move_plater(int chrx, int chry);

int main()
{
	int chrx = 3, chry = 0;
	exit_ran();
	while (1)
	{
		player(chrx, chry);
		system("cls");
		map_create();
		move_plater(chrx, chry);
	}
}

void player(int x, int y)
{
	map[x][y] = 3;	//플레이어가 움직이면 배열의 숫자가 3으로 바뀜

}

void move_plater(int chrx, int chry)
{
	chrx = 3, chry = 0;
	int move = 0;
	_getch();	//하나의 키를 입력받는 함수
	move = _getch();

	if (move == UP && map[chrx][chry + 1] == 0 || move == UP && map[chrx][chry + 1] == 2)	//위
	{
		map[chrx][chry] = 0;
		chry++;
	}
	else if (move == LEFT && map[chrx - 1][chry] == 0 || move == LEFT && map[chrx - 1][chry] == 2)	//왼
	{
		map[chrx][chry] = 0;
		chrx--;
	}
	else if (move == DOWN && map[chrx][chry - 1] == 0 || move == DOWN && map[chrx][chry - 1] == 2)	//아래
	{
		map[chrx][chry] = 0;
		chry--;
	}
	else if (move == RIGHT && map[chrx + 1][chry] == 0 || move == RIGHT && map[chrx + 1][chry] == 2)	//오른
	{
		map[chrx][chry] = 0;
		chrx++;
	}
}

void map_create()	//미로 맵 제작 함수
{
	int a, b;
	for (a = 0; a < 27; a++) {
		for (b = 0; b < 30; b++) {
			if (map[a][b] == 1)	//map배열에서 모든 1을 □로 출력(벽)
				printf("□");
			else if (map[a][b] == 0)
				printf("  ");	//map배열에서 모든 0을 공백으로 출력(길)
			else if (map[a][b] == 2)
				printf("★");	//map배열에서 모든 2을 ▼로 출력(도착지점)
			else if (map[a][b] == 3) {
				printf("●");	//map배열에서 모든 3을 ●로 출력(플레이어)
			}
		}
		printf("\n");
	}
}